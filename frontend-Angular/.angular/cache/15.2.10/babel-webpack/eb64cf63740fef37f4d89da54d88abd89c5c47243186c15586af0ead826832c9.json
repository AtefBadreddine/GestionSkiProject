{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { TypeAbonnement, TypeAbonnementValues } from 'src/app/models/abonnement';\nlet AbonnementListComponent = class AbonnementListComponent {\n  constructor(abonnementService, formBuilder, router) {\n    this.abonnementService = abonnementService;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.typeAbonnementValues = TypeAbonnementValues;\n    this.message = '';\n    this.listAbonnement = [];\n  }\n  ngOnInit() {\n    this.abonnementService.getAllAbonnement().subscribe(res => {\n      this.listAbonnement = res;\n    }, error => {\n      console.error('Error fetching abonnement:', error);\n    });\n    this.abonnementForm = this.formBuilder.group({\n      numAbon: [\"\", [Validators.required]],\n      dateDebut: [\"\", [Validators.required]],\n      dateFin: [\"\", [Validators.required]],\n      prixAbon: [\"\", [Validators.required]],\n      typeAbonnement: [TypeAbonnement.ANNUEL, [Validators.required]]\n    });\n  }\n  deleteAbonnement(id) {\n    this.abonnementService.deleteAbonnement(id).subscribe(res => {\n      if (res.status === 200) this.listAbonnement = this.listAbonnement.filter(abonnement => abonnement.numAbon !== id);\n    });\n  }\n  calculerJoursRestants(id) {\n    this.abonnementService.calculerJoursRestants(id).subscribe(response => {\n      this.message = `Il reste ${response} jours dans votre abonnement.`;\n    }, error => {\n      console.error('Erreur lors de l\\'appel du service:', error);\n      this.message = 'Erreur lors du calcul des jours restants.';\n    });\n  }\n};\nAbonnementListComponent = __decorate([Component({\n  selector: 'app-abonnement-list.ts',\n  templateUrl: './abonnement-list.component.html',\n  styleUrls: ['./abonnement-list.component.scss']\n})], AbonnementListComponent);\nexport { AbonnementListComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAiCC,UAAU,QAAQ,gBAAgB;AAEnE,SAAqBC,cAAc,EAAEC,oBAAoB,QAAQ,2BAA2B;AAQrF,IAAMC,uBAAuB,GAA7B,MAAMA,uBAAuB;EAKlCC,YAAoBC,iBAAqC,EAAWC,WAAwB,EAAUC,MAAc;IAAhG,sBAAiB,GAAjBF,iBAAiB;IAA+B,gBAAW,GAAXC,WAAW;IAAuB,WAAM,GAANC,MAAM;IAH5G,yBAAoB,GAAGL,oBAAoB;IAC3C,YAAO,GAAW,EAAE;IACpB,mBAAc,GAAkB,EAAE;EAGlC;EAEAM,QAAQ;IACN,IAAI,CAACH,iBAAiB,CAACI,gBAAgB,EAAE,CAACC,SAAS,CAChDC,GAAiB,IAAI;MACpB,IAAI,CAACC,cAAc,GAAGD,GAAG;IAC3B,CAAC,EACAE,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD,CAAC,CACF;IACD,IAAI,CAACE,cAAc,GAAG,IAAI,CAACT,WAAW,CAACU,KAAK,CAAC;MAC3CC,OAAO,EAAE,CAAC,EAAE,EAAE,CAACjB,UAAU,CAACkB,QAAQ,CAAC,CAAC;MACpCC,SAAS,EAAE,CAAC,EAAE,EAAE,CAACnB,UAAU,CAACkB,QAAQ,CAAC,CAAC;MACtCE,OAAO,EAAE,CAAC,EAAE,EAAE,CAACpB,UAAU,CAACkB,QAAQ,CAAC,CAAC;MACpCG,QAAQ,EAAE,CAAC,EAAE,EAAE,CAACrB,UAAU,CAACkB,QAAQ,CAAC,CAAC;MACrCI,cAAc,EAAE,CAACrB,cAAc,CAACsB,MAAM,EAAE,CAACvB,UAAU,CAACkB,QAAQ,CAAC;KAC9D,CAAC;EAEJ;EAEAM,gBAAgB,CAACC,EAAW;IAC1B,IAAI,CAACpB,iBAAiB,CAACmB,gBAAgB,CAACC,EAAE,CAAC,CAACf,SAAS,CAClDC,GAAG,IAAI;MACF,IAAIA,GAAG,CAACe,MAAM,KAAK,GAAG,EACtB,IAAI,CAACd,cAAc,GAAG,IAAI,CAACA,cAAc,CAACe,MAAM,CAACC,UAAU,IAAIA,UAAU,CAACX,OAAO,KAAKQ,EAAE,CAAC;IAE/F,CAAC,CACF;EACL;EACAI,qBAAqB,CAACJ,EAAW;IAC/B,IAAI,CAACpB,iBAAiB,CAACwB,qBAAqB,CAACJ,EAAE,CAAC,CAC7Cf,SAAS,CACPoB,QAAQ,IAAI;MACX,IAAI,CAACC,OAAO,GAAG,YAAYD,QAAQ,+BAA+B;IACpE,CAAC,EACAjB,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D,IAAI,CAACkB,OAAO,GAAG,2CAA2C;IAC5D,CAAC,CACF;EACL;CACC;AAjDY5B,uBAAuB,eALnCJ,SAAS,CAAC;EACTiC,QAAQ,EAAE,wBAAwB;EAClCC,WAAW,EAAE,kCAAkC;EAC/CC,SAAS,EAAE,CAAC,kCAAkC;CAC/C,CAAC,GACW/B,uBAAuB,CAiDnC;SAjDYA,uBAAuB","names":["Component","Validators","TypeAbonnement","TypeAbonnementValues","AbonnementListComponent","constructor","abonnementService","formBuilder","router","ngOnInit","getAllAbonnement","subscribe","res","listAbonnement","error","console","abonnementForm","group","numAbon","required","dateDebut","dateFin","prixAbon","typeAbonnement","ANNUEL","deleteAbonnement","id","status","filter","abonnement","calculerJoursRestants","response","message","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\projet_spring_angular\\GestionSkiProject\\frontend-Angular\\src\\app\\component_ab\\components\\abonnement-list\\abonnement-list.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Abonnement, TypeAbonnement, TypeAbonnementValues } from 'src/app/models/abonnement';\nimport { AbonnementService } from 'src/app/services/abonnement.service';\n\n@Component({\n  selector: 'app-abonnement-list.ts',\n  templateUrl: './abonnement-list.component.html',\n  styleUrls: ['./abonnement-list.component.scss']\n})\nexport class AbonnementListComponent {\n  abonnementForm: FormGroup;\n  typeAbonnementValues = TypeAbonnementValues;\n  message: string = '';\n  listAbonnement : Abonnement[] = [];\n  constructor(private abonnementService : AbonnementService , private formBuilder :FormBuilder ,private router: Router ){\n\n  }\n  \n  ngOnInit() {\n    this.abonnementService.getAllAbonnement().subscribe(\n      (res: Abonnement[]) => {\n        this.listAbonnement = res;\n      },\n      (error) => {\n        console.error('Error fetching abonnement:', error);\n      }\n    );\n    this.abonnementForm = this.formBuilder.group({\n      numAbon: [\"\", [Validators.required]],\n      dateDebut: [\"\", [Validators.required]],\n      dateFin: [\"\", [Validators.required]],\n      prixAbon: [\"\", [Validators.required]],\n      typeAbonnement: [TypeAbonnement.ANNUEL, [Validators.required]]\n    });\n\n  }\n\n  deleteAbonnement(id : number) {\n    this.abonnementService.deleteAbonnement(id).subscribe(\n      (res) => {\n            if (res.status === 200)\n            this.listAbonnement = this.listAbonnement.filter(abonnement => abonnement.numAbon !== id);\n\n      }\n    )\n}\ncalculerJoursRestants(id : number): void {\n  this.abonnementService.calculerJoursRestants(id)\n    .subscribe(\n      (response) => {\n        this.message = `Il reste ${response} jours dans votre abonnement.`;\n      },\n      (error) => {\n        console.error('Erreur lors de l\\'appel du service:', error);\n        this.message = 'Erreur lors du calcul des jours restants.';\n      }\n    );\n}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}